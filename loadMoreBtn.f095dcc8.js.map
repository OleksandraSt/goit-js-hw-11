{"mappings":"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","sources":["src/loadMoreBtn.js"],"sourcesContent":["import './css/styles.css';\nimport { fetchPictures } from './js/fetchPictures';\nimport Notiflix from 'notiflix';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst searchForm = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst endOfSearchText = document.querySelector('.gallery__text');\n\nlet query = '';\nlet page = 1;\nlet loadedHits = 0;\nconst perPage = 40;\n\nsearchForm.addEventListener('submit', onSearchForm);\nloadMoreBtn.addEventListener('click', onLoadMoreBtn);\n\nasync function onSearchForm(e) {\n    e.preventDefault();\n\n    page = 1;\n    query = e.currentTarget.searchQuery.value.trim();\n    gallery.innerHTML = '';\n\n    loadMoreBtn.classList.add('is-hidden');\n    endOfSearchText.classList.add('is-hidden');\n    \n    if (query === '') {\n        alertEmptySearch();\n        return;\n    }\n\n    try {\n        const object = await fetchPictures(query, page, perPage);\n        const objData = object.data;\n        loadedHits = objData.hits.length;\n\n        if (objData.totalHits === 0) {\n            alertNoPicturesFound();\n            } else {\n                renderGallery(objData.hits);\n                alertPicturesToFound(objData);\n                const simpleLightBox = new SimpleLightbox('.gallery a').refresh();\n            }\n\n            if (objData.totalHits > perPage) {\n                loadMoreBtn.classList.remove('is-hidden');\n            }\n        \n        onScroll();\n        \n    } catch (error) {\n        Notiflix.Notify.failure(\"Sorry, the error occurred\");\n    }\n\n}\n\nasync function onLoadMoreBtn() {\n    page += 1;\n\n    try {\n        const object = await fetchPictures(query, page, perPage);\n        const objData = object.data;\n        const totalHits = objData.totalHits;\n        loadedHits += objData.hits.length;\n\n        renderGallery(objData.hits);\n            const simpleLightbox = new SimpleLightbox('.gallery a').refresh();\n\n        if (loadedHits === totalHits) {\n            loadMoreBtn.classList.add('is-hidden');\n            endOfSearchText.classList.remove('is-hidden');\n            }\n        \n        onScrollMore();\n    } catch (error) {\n        Notiflix.Notify.failure(\"Sorry, the error occurred\");\n    }\n\n}\n\nfunction renderGallery(images) {\n    const galleryMarkup = images\n        .map(({ id, largeImageURL, webformatURL, tags, likes, views, comments, downloads }) => {\n            return `\n                <a class=\"gallery__link\" href=\"${largeImageURL}\">\n                    <div class=\"photo-card\" id=\"${id}\">\n                    <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n                    <div class=\"info\">\n                        <p class=\"info-item\">\n                            <b>Likes</b> ${likes}\n                        </p>\n                        <p class=\"info-item\">\n                            <b>Views</b> ${views}\n                        </p>\n                        <p class=\"info-item\">\n                            <b>Comments</b> ${comments}\n                        </p>\n                        <p class=\"info-item\">\n                            <b>Downloads</b> ${downloads}\n                        </p>\n                    </div>\n                </div>\n                </a>\n      `\n       \n        })\n        .join('');\n\ngallery.insertAdjacentHTML('beforeend', galleryMarkup);\n}\n\nfunction alertPicturesToFound(objData) {\n    Notiflix.Notify.success(`Hooray! We found ${objData.totalHits} images.`);\n}\n\nfunction alertEmptySearch() {\n    Notiflix.Notify.failure('Enter a query, please');\n}\n\nfunction alertNoPicturesFound() {\n    Notiflix.Notify.failure('Nothing was found. Please enter another query');\n}\n\nfunction onScroll () {\n    window.scrollBy({\n      top: 0,\n      behavior: 'smooth',\n    });\n}\n\nfunction onScrollMore () {\n    const { height: cardHeight } = document\n       .querySelector('.gallery')\n       .firstElementChild.getBoundingClientRect();\n\n     window.scrollBy({\n       top: cardHeight * 2,\n       behavior: 'smooth',\n     });\n}"],"names":["$bpxeT","parcelRequire","$abb96ff53e325dcc$var$searchForm","document","querySelector","$abb96ff53e325dcc$var$gallery","$abb96ff53e325dcc$var$loadMoreBtn","$abb96ff53e325dcc$var$endOfSearchText","$abb96ff53e325dcc$var$query","$abb96ff53e325dcc$var$page","$abb96ff53e325dcc$var$loadedHits","$abb96ff53e325dcc$var$perPage","$abb96ff53e325dcc$var$_onSearchForm","$parcel$interopDefault","$2TvXO","mark","_callee","e","object","objData","preventDefault","currentTarget","searchQuery","value","trim","innerHTML","classList","add","$abb96ff53e325dcc$var$alertEmptySearch","$2sXTM","fetchPictures","_ctx","sent","data","hits","length","totalHits","$abb96ff53e325dcc$var$alertNoPicturesFound","$abb96ff53e325dcc$var$renderGallery","$abb96ff53e325dcc$var$alertPicturesToFound","$5IjG7","refresh","remove","$abb96ff53e325dcc$var$onScroll","$6JpON","Notify","failure","apply","this","arguments","$abb96ff53e325dcc$var$_onLoadMoreBtn","$abb96ff53e325dcc$var$onScrollMore","images","galleryMarkup","map","param","id","largeImageURL","webformatURL","tags","likes","views","comments","downloads","concat","join","insertAdjacentHTML","success","window","scrollBy","top","behavior","cardHeight","firstElementChild","getBoundingClientRect","height","addEventListener"],"version":3,"file":"loadMoreBtn.f095dcc8.js.map"}